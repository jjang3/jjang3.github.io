---
import * as CONTENT from "./content";
import Container from "../components/Container.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { Icon } from "astro-icon";
---

<html lang="en">
    <head>
        <script is:inline>
            // Function to set the theme explicitly
            function setTheme(theme) {
                // Update the `data-theme` attribute
                document.documentElement.setAttribute("data-theme", theme);

                // Add or remove the `dark` class for Tailwind
                if (theme === "black") {
                    document.documentElement.classList.add("dark");
                } else {
                    document.documentElement.classList.remove("dark");
                }

                // Save the preference in localStorage
                localStorage.setItem("theme", theme);
            }

            // Initialize the theme on page load
            const savedTheme = localStorage.getItem("theme");
            if (!savedTheme) {
                setTheme("lofi"); // Default to light mode
            } else {
                setTheme(savedTheme);
            }

            // Add event listeners for buttons to explicitly set the theme
            document.addEventListener("DOMContentLoaded", () => {
                const lofiButton = document.getElementById("lofi-mode");
                const blackButton = document.getElementById("black-mode");

                lofiButton.addEventListener("click", () => setTheme("lofi"));
                blackButton.addEventListener("click", () => setTheme("black"));
            });
        </script>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="/favicon.webp" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500&display=swap" rel="stylesheet">
        <meta name="viewport" content="width=device-width" />
        <title>Hello! | {CONTENT.name}</title>
    </head>
    <body class="bg-background text-text dark:bg-background-dark dark:text-text-dark flex flex-col min-h-screen">
        <Header />
        <div class="flex items-center absolute top-4 right-4 md:top-6 md:right-6 lg:top-8 lg:right-8 xl:top-10 xl:right-10 z-10 gap-2">
            <!-- Button to explicitly set the light mode -->
            <button
                id="lofi-mode"
                class="px-4 py-2 bg-gray-200 text-black dark:bg-gray-800 dark:text-white rounded"
            >
                Light Mode
            </button>
            <!-- Button to explicitly set the dark mode -->
            <button
                id="black-mode"
                class="px-4 py-2 bg-gray-800 text-white dark:bg-gray-200 dark:text-black rounded"
            >
                Dark Mode
            </button>
        </div>
        <div class="divider mx-auto h-fit max-w-3xl w-[95vw] flex flex-nowrap bg-secondary"></div>
        <main class="mx-auto flex-grow max-h-[90vh] md:max-h-[70vh] max-w-3xl overflow-y-scroll py-2 grid w-[95vw]">
            <!-- Bar Effect -->
            <article class="mx-auto h-fit max-w-3xl w-[95vw] flex flex-nowrap bg-slate-400">
                <div class="bg-slate-900 hover:scale-x-[2] w-full h-1.5" id="one"></div>
                <div class="bg-red-900 hover:scale-x-[2] w-full h-1.5" id="two"></div>
                <div class="bg-blue-900 hover:scale-x-[2] w-full h-1.5" id="three"></div>
            </article>
            <Container />
        </main>
        <Footer />
    </body>
</html>

<style is:global>
    * {
        transition: 350ms ease-in-out;
        font-family: 'Manrope', sans-serif;
    }

    @media only screen and (max-width: 480px) {
        * {
            font-size: 12px;
        }
    }

    /* Scrollbar styling for light and dark mode */
    .overflow-y-scroll::-webkit-scrollbar {
        width: 3px;
    }

    .overflow-y-scroll::-webkit-scrollbar-thumb {
        background-color: var(--base-content);
    }

    .overflow-y-scroll {
        scrollbar-width: 1px;
    }

    /* Define base-content fallback for better text contrast */
    :root {
        --base-content: #111111; /* Default text color for light mode */
    }
    [data-theme="black"] {
        --base-content: #e5e5e5; /* High-contrast text color for dark mode */
    }
    body {
        color: var(--base-content);
    }
</style>
